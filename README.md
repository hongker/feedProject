## FeedProject
基于读扩散(复制)模式的类微博的Feed流服务系统设计说明

## 数据库设计

## 功能模块设计
### User 用户
- 拉取最新Feed流数据
获取用户关注的目标用户发布的最新信息。

- 拉取历史Feed流数据
获取用户以前拉取过的历史Feed数据。

### Relation 关联
- 创建关注
用户选择目标用户，创建关注的关联。

- 取消关注
用户取消关注目标用户，更改关注状态为禁用。

### Feed 数据
- 发布最新的数据
用户发布新内容，写入DB，同步Redis.

## 流程说明
![流程图](http://processon.com/chart_image/5e95759b7d9c0842ab38e5ff.png)

### 用户发布内容
- 1.写入DB
- 2.同步缓存

### 用户拉取最新数据
- 1.通过Offset分页获取用户关注的目标UID,Offset初始化为0
- 2.检查是否有获取到关注目标UID,更新Offset。如果没有，则跳出循环。
- 3.通过目标用户UID获取最新发布的Feed数据
- 4.检查数据的数量是否凑够请求所需要的量。如果不足，重复步骤1.
- 5.返回格式化后的响应内容。
- 6.将新Feed异步更新到历史Feed队列里。

### 用户获取历史数据